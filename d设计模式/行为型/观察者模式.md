

# 观察者模式

> **定义：** 又被称为发布≠订阅（PublishØSubscribe）模式，它定义了一种一对多的依赖关系，让多个观察者对象同时监听某一主题对象。这个主题对象在状态变化时，会通知所有的观察者对象，使他们能够自动更新自己。
>
> **结构：**
>
> > **抽象主题（抽象被观察者）：** 抽象主题角色把所有观察者对象保存在一个集合里，每个主题都可以有任意数量的观察者，抽象主题提供一个接口，可以增加和删除观察者对象。
> >
> > **具体主题（具体被观察者）：** 该角色将有关状态存入具体观察者对象，在具体主题的内部状态发生改变时，给所有注册过的观察者发送通知。
> >
> > **抽象观察者：** 是观察者的抽象类，它定义了一个更新接口，使得在得到主题更改通知时更新自己。
> >
> > **具体观察者：**实现抽象观察者定义的更新接口，以便在得到主题更改通知时更新自身的状态
>
> **优缺点：**
>
> > **优点：**
> >
> > 1. 将所有与某个状态有关的行为放到一个类中，并且可以方便地增加新的状态，只需要改变对象状态即可改变对象的行为。
> > 
> >**缺点：**
> > 
> >1. 状态模式的使用必然会增加系统类和对象的个数。
> > 3. 状态模式对“开闭原则”的支持并不太好。
> 
> **适用场景：**
>
> > 1. 当一个对象的行为取决于它的状态，并且它必须在运行时根据状态改变它的行为时，就可以考虑使用观察者模式。
>> 2. 一个操作中含有庞大的分支结构，并且这些分支决定于对象的状态时。
> 
> **应用案例：**
>
> > 在使用微信公众号时，大家都会有这样的体验，当你关注的公众号中有新内容更新的话，它就会推送给关注公众号的微信用户端。我们使用观察者模式来模拟这样的场景，微信用户就是观察者，微信公众号是被观察者，有多个的微信用户关注了程序猿这个公众号。